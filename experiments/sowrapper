#!/bin/bash

ARGS=()
MO=true
while [[ $# -gt 0 ]]; do
case "$1" in
    -algorithm)
        ALGO="$2"
        shift; shift
        ;;
    *)
        ARGS+=("$1")
        shift
        ;;
esac
done

function hmean {
    [[ $1 =~ \[(.*),[[:space:]](.*)\] ]]
    hm=$(python -c "print((lambda x,y: ((x**-1 + y**-1)/2)**-1)(${BASH_REMATCH[1]}, ${BASH_REMATCH[2]}))")
    [[ $1 =~ (.*\[)(.*\].*) ]]
    echo "${BASH_REMATCH[1]}${hm}, ${BASH_REMATCH[2]}"
}

ARGS=${ARGS[*]}
CMD="../${ALGO//[\'\"]/} -data ${ARGS//[\'\"]/}"

hmean "$($CMD)"

